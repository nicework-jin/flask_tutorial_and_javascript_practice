{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}Posts{% endblock %}</h1>
    <!-- 로그인 한 유저라면 글 작성하기 버튼을 나타냅니다. -->
  {% if g.user %}
    <a class="action" href="{{ url_for('blog.create') }}">New</a>
  {% endif %}
{% endblock %}

{% block content %}
    <!-- 유저들이 작성한 글을 보여줍니다. -->
  {% for post in posts %}
    <article class="post">
      <header>
        <div>
          <h1>{{ post['title'] }}</h1>
            <!-- 'by 개똥이 on 2021-02-08' 가 글의 제목 밑에 출력됩니다. -->
          <div class="about">by {{ post['username'] }} on {{ post['created'].strftime('%Y-%m-%d') }}</div>
        </div>
        <!-- 글의 작성자의 글을 클릭했을 때는 수정하기 버튼을 나타냅니다. -->
        {% if g.user['id'] == post['author_id'] %}
          <a class="action" href="{{ url_for('blog.update', id=post['id']) }}">Edit</a>
        {% endif %}
      </header>
      <!-- 글의 내용을 출력합니다.  -->
      <p class="body">{{ post['body'] }}</p>
    </article>
    <!--
        1. loop.last는 반복문에서 마지막 반복을 제외하고 수행되는 명령어입니다.
        2. hr은 html에서 가로 줄을 나타내는데 사용됩니다.
        즉, 아래 코드는 글의 내용을 가로 줄로 구분하기 위해 작성됐습니다.
        (맨 마지막 줄을 가로 줄을 그리지 않습니다.)
      -->
    {% if not loop.last %}
      <hr>
    {% endif %}
  {% endfor %}
{% endblock %}